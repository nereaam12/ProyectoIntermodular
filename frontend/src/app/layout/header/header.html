<!-- Topbar -->
<div class="topbar">
  <div class="container-fluid d-flex justify-content-between align-items-center">
    <!-- Language Dropdown -->
    <div class="lang-dropdown">
      <button
        class="lang-toggle"
        (click)="toggleLangDropdown($event)"
        [attr.aria-label]="'header.openMenu' | translate"
      >
        <img
          [src]="i18n.currentLangOption.flag"
          [alt]="i18n.currentLangOption.label"
          class="flag-img"
        />
        <span class="lang-code">{{ i18n.currentLang() | uppercase }}</span>
        <span class="lang-chevron" [class.open]="langDropdownOpen()">&#9662;</span>
      </button>

      @if (langDropdownOpen()) {
        <ul class="lang-menu">
          @for (lang of i18n.languages; track lang.code) {
            <li>
              <button
                class="lang-option"
                [class.active]="lang.code === i18n.currentLang()"
                (click)="selectLang(lang.code)"
              >
                <img [src]="lang.flag" [alt]="lang.label" class="flag-img" />
                <span class="lang-label">{{ lang.label }}</span>
              </button>
            </li>
          }
        </ul>
      }
    </div>

    <button
      class="hamburger"
      (click)="toggleMenu()"
      [attr.aria-label]="'header.openMenu' | translate"
    >
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
</div>

<!-- Menu Overlay -->
@if (menuOpen()) {
  <div class="menu-backdrop" (click)="closeMenu()"></div>
  <nav class="menu-overlay">
    <button
      class="menu-close"
      (click)="closeMenu()"
      [attr.aria-label]="'header.closeMenu' | translate"
    >
      &#10005;
    </button>

    <ul class="menu-list">
      @for (item of navItems(); track item.route) {
        <li>
          <a
            [routerLink]="item.route"
            routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: item.route === '/' }"
            (click)="closeMenu()"
          >
            {{ item.labelKey | translate }}
          </a>
        </li>
      }
    </ul>

    <div class="menu-footer">
      <p>{{ 'header.socialLine1' | translate }}</p>
      <p>{{ 'header.socialLine2' | translate }}</p>
    </div>
  </nav>
}
